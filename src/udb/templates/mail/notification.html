{% extends 'mail/email_layout.html' %}
{% import "macro.html" as macro %}
{% block title %}
  {%- if messages[0].changes is none -%}
    Comment on {{ macro.display_name(messages[0].model_name) }} {{ messages[0].model_object.summary }} by {{
    messages[0].author_name }}
  {%- else -%}
    {%- for msg in messages[:5] %}{{ macro.display_name(msg.model_name) }} {{ msg.model_object.summary }}{{ ", " if not
      loop.last else " " }}
    {% endfor -%}
    {{ _("modified") if messages[0].type == 'dirty' else _('created') }} by {{ messages[0].author_name }}
    {%- if messages[5] -%}
      {{ ' ' }}
      {%- set change_count = (messages|length) - 5 -%}
      {%- trans n=change_count %}And {{ n }} more changes{% endtrans -%}
    {%- endif -%}
  {%- endif -%}
{% endblock title %}
{% block body %}
  {% for message in messages[:5] %}
    {% if not loop.first %}<hr />{% endif %}
    <div class="space-y-3">
      <h2>{{ macro.display_name(message.model_name) }} {{ message.model_object.summary }}</h2>
      {% import "mail/messages.html" as messages %}
      {{ messages.show_message(message) }}
    </div>
    <a href="{{ url_for(message.model_object, 'edit#history') }}">{% trans %}View in browser{% endtrans %}</a>
  {% endfor %}
  {% if messages[5] %}
    <hr />
    {% set change_count = (messages|length) - 5 %}
    {% trans n=change_count %}And {{ n }} more changes{% endtrans %}
  {% endif %}
{% endblock body %}
