{% extends 'common/list.html' %}
{# Subnet are sorted a in specific wayt to mimic the IP CIDR ordering. #}
{# data-depth is used by datatables to create a "tree" representation of the data. #}
{% block table_list scoped %}
{% set extra_columns = [('ip_cidr', form.ip_cidr.label.text, True), ('name', form.name.label.text, True), ('vrf', form.vrf.label.text, True), ('dnszones', form.dnszones.label.text, False)] %}
{% call(obj) _table.table(obj_list|sort(attribute='ip_cidr', reverse=True), table_extra_columns = extra_columns, filter_location_id='#filter-location') %}
{% set ip_network = obj.ip_network %}
<td data-depth="{{obj.related_supernets|length}}" data-order="{{ ip_network._version }}#{{ ip_network.network_address.exploded }}#{{ ip_network.prefixlen }}">
    <a href="{{url_for(obj, 'edit')}}" data-sort="{{obj.ip_cidr}}">
        {{ macro.icon(obj, "float-start pe-2") }}
        {{ obj.ip_cidr }}
    </a>
</td>
<td>
    {{ obj.name }}
</td>
<td>
    {% if obj.vrf %}{{obj.vrf}}{% endif %}
</td>
<td>
    {% for zone in obj.dnszones %}
    <a href="{{url_for(zone, 'edit')}}"><span class="badge rounded-pill bg-secondary">{{zone.summary}}</span></a>
    {% endfor %}
</td>
{% endcall %}
{% endblock %}
