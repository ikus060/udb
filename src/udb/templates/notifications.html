{% extends 'layout.html' %}
{% import "macro.html" as macro %}
{% import "common/status.html" as _status %}
{% block body %}
{# Title #}
<h2>{%trans%}Edit notification preferences{%endtrans%}</h2>
{% include "flash.html" %}
<hr />
{# General form #}
<div class="row">
    <div class="col-md">
        <h4>{%trans%}Notifications{%endtrans%}</h4>
        <p>{%trans%}In this view, you can unsubscribe from certain records to stop receiving notifications about
            them.{%endtrans%}</p>
    </div>
    <div class="col-md-9">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col" colspan="2">
                        <span>{%trans%}Summary{%endtrans%}</span>
                    </th>
                    <th scope="col">
                        <span>{%trans%}Owner{%endtrans%}</span>
                    </th>
                    <th scope="col">
                        <span class="visually-hidden">{%trans%}Actions{%endtrans%}</span>
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for obj in obj_list %}
                <tr>
                    <td class="align-middle" style="width: 25px">
                        <a href="{{url_for(obj.model_name, obj.id, 'edit')}}">
                            {{ macro.icon(obj.model_name, "h4") }}
                        </a>
                    </td>
                    <td>
                        <a href="{{url_for(obj.model_name, obj.id, 'edit')}}">
                            <strong>{{ macro.display_name(obj.model_name) }}</strong> {{ _status.badge(obj) }}
                            <br />{{obj.summary}}
                        </a>
                    </td>
                    <td>
                        {% if obj.owner %}{{obj.owner}}{% else %}-{% endif %}
                    </td>
                    <td class="align-middle text-end">
                        <a href="{{url_for(obj.model_name, obj.id, 'unfollow', currentuser.id, redirect='notifications')}}">
                            {%trans%}Stop following{%endtrans%}
                        </a>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="5" class="text-center p-5">
                        <i class="bi bi-bell display-4 fw-bold" aria-hidden="true"></i><br />
                        <p>
                            {% trans %}You are not following any record.{% endtrans %}
                        </p>
                    </td>
                </tr>
                {% endfor %}

            </tbody>
        </table>
    </div>
</div>
{% endblock %}